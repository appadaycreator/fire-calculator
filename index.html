<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="manifest" href="manifest-json.json">
    <meta name="theme-color" content="#667eea">
    <title>FIREè¨ˆç®—æ©Ÿ - æ—©æœŸãƒªã‚¿ã‚¤ã‚¢é”æˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</title>
    <meta name="description" content="ã‚ãªãŸã®FIREï¼ˆæ—©æœŸãƒªã‚¿ã‚¤ã‚¢ï¼‰é”æˆå¹´é½¢ã‚’ç„¡æ–™ã§è¨ˆç®—ã€‚4%ãƒ«ãƒ¼ãƒ«ã«åŸºã¥ãå¿…è¦è³‡ç”£é¡ã€ç©ç«‹ãƒ—ãƒ©ãƒ³ã€ãƒ¢ãƒ³ãƒ†ã‚«ãƒ«ãƒ­ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã§å°†æ¥ã‚’å¯è¦–åŒ–ã€‚">
    
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-TXQGZRF9');</script>
    <!-- End Google Tag Manager -->
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* ãƒ˜ãƒƒãƒ€ãƒ¼ */
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }
        
        .header p {
            color: #666;
            font-size: 1.1em;
        }
        
        /* ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */
        .main-card {
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
        }
        
        /* ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ */
        .progress-container {
            margin-bottom: 40px;
        }
        
        .progress-bar {
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 20px;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transition: width 0.3s ease;
            border-radius: 4px;
        }
        
        .steps {
            display: flex;
            justify-content: space-between;
            gap: 20px;
        }
        
        .step {
            flex: 1;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .step-number {
            width: 40px;
            height: 40px;
            background: #e0e0e0;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 10px;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        
        .step.active .step-number {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }
        
        .step.completed .step-number {
            background: #4caf50;
            color: white;
        }
        
        /* ãƒ•ã‚©ãƒ¼ãƒ  */
        .form-section {
            margin-bottom: 30px;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .form-group {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            transition: all 0.3s ease;
        }
        
        .form-group:hover {
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }
        
        .form-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        .form-group input:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .form-group small {
            display: block;
            margin-top: 5px;
            color: #777;
            font-size: 0.9em;
        }
        
        /* ãƒœã‚¿ãƒ³ */
        .button-group {
            display: flex;
            justify-content: space-between;
            gap: 15px;
            margin-top: 30px;
        }
        
        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }
        
        .btn-secondary {
            background: #e0e0e0;
            color: #333;
        }
        
        .btn-secondary:hover {
            background: #d0d0d0;
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        /* çµæœã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
        .result-card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
        }
        
        .result-card h2 {
            font-size: 3em;
            margin-bottom: 10px;
        }
        
        .result-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .result-item {
            background: rgba(255, 255, 255, 0.2);
            padding: 20px;
            border-radius: 12px;
            backdrop-filter: blur(10px);
        }
        
        .result-item h3 {
            font-size: 0.9em;
            margin-bottom: 5px;
            opacity: 0.9;
        }
        
        .result-item p {
            font-size: 2em;
            font-weight: bold;
        }
        
        /* ã‚°ãƒ©ãƒ• */
        .chart-container {
            position: relative;
            height: 400px;
            width: 100%;
            margin: 20px 0;
        }
        
        @media (max-width: 768px) {
            .chart-container {
                height: 300px;
            }
        }
        
        #assetChart {
            max-width: 100%;
            height: 400px;
        }
        
        /* ã‚·ã‚§ã‚¢ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
        .share-section {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .share-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .share-btn {
            padding: 12px 24px;
            border-radius: 8px;
            text-decoration: none;
            color: white;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .share-twitter {
            background: #1DA1F2;
        }
        
        .share-facebook {
            background: #4267B2;
        }
        
        .share-line {
            background: #00B900;
        }
        
        .share-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        /* ã‚¢ãƒ•ã‚£ãƒªã‚¨ã‚¤ãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
        .affiliate-section {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            margin-top: 30px;
            text-align: center;
        }
        
        .affiliate-section h3 {
            color: #2c5282;
            margin-bottom: 15px;
            font-size: 1.2em;
        }
        
        .affiliate-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .affiliate-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }
        
        .affiliate-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }
        
        .affiliate-card h4 {
            color: #2c5282;
            margin-bottom: 10px;
        }
        
        .affiliate-card p {
            color: #4a5568;
            margin-bottom: 15px;
            font-size: 0.9em;
        }
        
        .affiliate-link {
            display: inline-block;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 12px 25px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .affiliate-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        /* ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ */
        .hidden {
            display: none !important;
        }
        
        .text-center {
            text-align: center;
        }
        
        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ– */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .main-card {
                padding: 20px;
            }
            
            .steps {
                gap: 10px;
            }
            
            .step span {
                display: none;
            }
            
            .result-card h2 {
                font-size: 2em;
            }
            
            .button-group {
                flex-direction: column;
            }
        }
        
        /* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .animate-fadeIn {
            animation: fadeIn 0.5s ease-out;
        }

        /* å…è²¬äº‹é … */
        .disclaimer {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            margin-top: 40px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
        }

        .disclaimer h2 {
            color: #333;
            font-size: 1.5em;
            margin-bottom: 20px;
        }

        .disclaimer p {
            color: #666;
            font-size: 0.9em;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .footer-links {
            text-align: center;
            margin-top: 20px;
        }

        .footer-links a {
            color: #667eea;
            text-decoration: none;
            margin: 0 10px;
            font-size: 0.9em;
        }

        .footer-links a:hover {
            text-decoration: underline;
        }
    </style>
    <script>
        // Service Workerç™»éŒ²
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/fire-calculator/service-worker.js')
                    .then(function(registration) {
                        console.log('ServiceWorker registration successful with scope: ', registration.scope);
                    })
                    .catch(function(error) {
                        console.log('ServiceWorker registration failed: ', error);
                    });
            });
        }
    </script>
</head>
<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TXQGZRF9"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    
    <div class="container">
        <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
        <div class="header animate-fadeIn">
            <h1>ğŸ”¥ FIREè¨ˆç®—æ©Ÿ</h1>
            <p>æ—©æœŸãƒªã‚¿ã‚¤ã‚¢é”æˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ - ã‚ãªãŸã®çµŒæ¸ˆçš„è‡ªç«‹ã¸ã®é“ã®ã‚Šã‚’å¯è¦–åŒ–</p>
        </div>
        
        <!-- ãƒ¡ã‚¤ãƒ³ã‚«ãƒ¼ãƒ‰ -->
        <div class="main-card animate-fadeIn">
            <!-- ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ -->
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressBar" style="width: 33.33%;"></div>
                </div>
                <div class="steps">
                    <div class="step active" onclick="setStep(0)">
                        <div class="step-number">1</div>
                        <span>åŸºæœ¬æƒ…å ±</span>
                    </div>
                    <div class="step" onclick="setStep(1)">
                        <div class="step-number">2</div>
                        <span>åæ”¯æƒ…å ±</span>
                    </div>
                    <div class="step" onclick="setStep(2)">
                        <div class="step-number">3</div>
                        <span>FIREç›®æ¨™</span>
                    </div>
                </div>
            </div>
            
            <!-- ãƒ•ã‚©ãƒ¼ãƒ ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
            <div class="form-section">
                <!-- ã‚¹ãƒ†ãƒƒãƒ—1: åŸºæœ¬æƒ…å ± -->
                <div id="step1" class="form-grid">
                    <div class="form-group">
                        <label for="currentAge">ç¾åœ¨ã®å¹´é½¢</label>
                        <input type="number" id="currentAge" value="30" min="20" max="70">
                        <small>20æ­³ã€œ70æ­³ã®ç¯„å›²ã§å…¥åŠ›</small>
                    </div>
                    <div class="form-group">
                        <label for="currentSavings">ç¾åœ¨ã®è²¯è“„é¡ï¼ˆä¸‡å††ï¼‰</label>
                        <input type="number" id="currentSavings" value="500" min="0" max="100000">
                        <small>æŠ•è³‡è³‡ç”£ã‚’å«ã‚€ç·è³‡ç”£</small>
                    </div>
                </div>
                
                <!-- ã‚¹ãƒ†ãƒƒãƒ—2: åæ”¯æƒ…å ± -->
                <div id="step2" class="form-grid hidden">
                    <div class="form-group">
                        <label for="annualIncome">å¹´åï¼ˆä¸‡å††ï¼‰</label>
                        <input type="number" id="annualIncome" value="500" min="0" max="10000">
                        <small>ç¨å¼•ãå‰ã®å¹´å</small>
                    </div>
                    <div class="form-group">
                        <label for="annualExpense">å¹´é–“æ”¯å‡ºï¼ˆä¸‡å††ï¼‰</label>
                        <input type="number" id="annualExpense" value="300" min="0" max="10000">
                        <small>ç”Ÿæ´»è²»ãƒ»å›ºå®šè²»ã‚’å«ã‚€</small>
                    </div>
                </div>
                
                <!-- ã‚¹ãƒ†ãƒƒãƒ—3: FIREç›®æ¨™ -->
                <div id="step3" class="form-grid hidden">
                    <div class="form-group">
                        <label for="targetExpense">ãƒªã‚¿ã‚¤ã‚¢å¾Œã®å¹´é–“ç”Ÿæ´»è²»ï¼ˆä¸‡å††ï¼‰</label>
                        <input type="number" id="targetExpense" value="240" min="0" max="10000">
                        <small>FIREå¾Œã®ç”Ÿæ´»è²»</small>
                    </div>
                    <div class="form-group">
                        <label for="expectedReturn">æƒ³å®šåˆ©å›ã‚Šï¼ˆ%ï¼‰</label>
                        <input type="number" id="expectedReturn" value="5" min="0" max="20" step="0.1">
                        <small>æŠ•è³‡ã®å¹´é–“æœŸå¾…åç›Šç‡</small>
                    </div>
                    <div class="form-group">
                        <label for="inflationRate">æƒ³å®šã‚¤ãƒ³ãƒ•ãƒ¬ç‡ï¼ˆ%ï¼‰</label>
                        <input type="number" id="inflationRate" value="2" min="0" max="10" step="0.1">
                        <small>å¹´é–“ã®ç‰©ä¾¡ä¸Šæ˜‡ç‡</small>
                    </div>
                </div>
                
                <!-- ãƒœã‚¿ãƒ³ -->
                <div class="button-group">
                    <button class="btn btn-secondary" id="prevBtn" onclick="prevStep()" disabled>å‰ã¸</button>
                    <button class="btn btn-primary" id="nextBtn" onclick="nextStep()">æ¬¡ã¸</button>
                </div>
            </div>
        </div>
        
        <!-- çµæœã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div id="results" class="main-card hidden">
            <!-- ãƒ¡ã‚¤ãƒ³çµæœ -->
            <div class="result-card animate-fadeIn">
                <h2>ğŸ‰ <span id="fireAge">-</span>æ­³ã§FIREé”æˆï¼</h2>
                <p>ã‚ã¨<span id="yearsToFire">-</span>å¹´ã§çµŒæ¸ˆçš„è‡ªç«‹ã‚’å®Ÿç¾</p>
                
                <div class="result-grid">
                    <div class="result-item">
                        <h3>å¿…è¦è³‡ç”£é¡</h3>
                        <p><span id="requiredAmount">-</span>ä¸‡å††</p>
                    </div>
                    <div class="result-item">
                        <h3>æ¯æœˆã®ç©ç«‹é¡</h3>
                        <p><span id="monthlySaving">-</span>ä¸‡å††</p>
                    </div>
                    <div class="result-item">
                        <h3>æˆåŠŸç¢ºç‡</h3>
                        <p><span id="successRate">-</span>%</p>
                    </div>
                    <div class="result-item">
                        <h3>ç·è²¯è“„é¡</h3>
                        <p><span id="totalSaved">-</span>ä¸‡å††</p>
                    </div>
                </div>
            </div>
            
            <!-- ã‚°ãƒ©ãƒ• -->
            <div class="chart-container">
                <canvas id="assetChart"></canvas>
            </div>
            
            <!-- ã‚·ã‚§ã‚¢ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
            <div class="share-section animate-fadeIn">
                <h3>ğŸ“¢ çµæœã‚’ã‚·ã‚§ã‚¢ã—ã¦å‹é”ã¨æ¯”è¼ƒã—ã‚ˆã†ï¼</h3>
                <div class="share-buttons">
                    <a href="#" class="share-btn share-twitter" id="shareTwitter" target="_blank">
                        <span>X</span>ã§ã‚·ã‚§ã‚¢
                    </a>
                    <a href="#" class="share-btn share-facebook" id="shareFacebook" target="_blank">
                        <span>f</span> Facebookã§ã‚·ã‚§ã‚¢
                    </a>
                    <a href="#" class="share-btn share-line" id="shareLine" target="_blank">
                        <span>L</span> LINEã§ã‚·ã‚§ã‚¢
                    </a>
                </div>
            </div>
            
            <!-- ã‚¢ãƒ•ã‚£ãƒªã‚¨ã‚¤ãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
            <div class="affiliate-section animate-fadeIn">
                <h3>FIREé”æˆã‚’åŠ é€Ÿã•ã›ã‚‹æŠ•è³‡ã‚µãƒ¼ãƒ“ã‚¹</h3>
                <p>è³‡ç”£å½¢æˆã«å½¹ç«‹ã¤ãŠã™ã™ã‚ã‚µãƒ¼ãƒ“ã‚¹ã‚’ã”ç´¹ä»‹ã—ã¾ã™</p>
                <div class="affiliate-grid">
                    <div class="affiliate-card">
                        <h4>iDeCoã§è³‡ç”£å½¢æˆ</h4>
                        <p>ç¨åˆ¶å„ªé‡ã‚’æ´»ç”¨ã—ã¦ã€ã‚ˆã‚ŠåŠ¹ç‡çš„ãªè³‡ç”£å½¢æˆã‚’å®Ÿç¾ã—ã¾ã—ã‚‡ã†ã€‚</p>
                        <a href="https://px.a8.net/svt/ejp?a8mat=457EG5+A7XYY2+3XCC+BXIYQ" rel="nofollow" class="affiliate-link">æ¾äº•è¨¼åˆ¸ã§ã¯ã˜ã‚ã‚‹iDeCo</a>
                        <img border="0" width="1" height="1" src="https://www15.a8.net/0.gif?a8mat=457EG5+A7XYY2+3XCC+BXIYQ" alt="">
                    </div>
                    <div class="affiliate-card">
                        <h4>æŠ•è³‡ã®åŸºç¤ã‚’å­¦ã¶</h4>
                        <p>ãƒ•ã‚¡ã‚¤ãƒŠãƒ³ã‚·ãƒ£ãƒ«ã‚¢ã‚«ãƒ‡ãƒŸãƒ¼ã§æŠ•è³‡ã®åŸºç¤ã‹ã‚‰å®Ÿè·µã¾ã§å­¦ã¹ã¾ã™</p>
                        <a href="https://px.a8.net/svt/ejp?a8mat=457EG5+A4DDBE+1IRY+25H4YA" target="_blank" rel="nofollow" class="affiliate-link">è©³ç´°ã‚’è¦‹ã‚‹</a>
                        <img border="0" width="1" height="1" src="https://www11.a8.net/0.gif?a8mat=457EG5+A4DDBE+1IRY+25H4YA" alt="">
                    </div>
                </div>
            </div>
        </div>

        <!-- å…è²¬äº‹é … -->
        <div class="disclaimer">
            <h2>å…è²¬äº‹é …</h2>
            <p>æœ¬è¨ˆç®—æ©Ÿã¯ã€ä¸€èˆ¬çš„ãªæƒ…å ±æä¾›ã‚’ç›®çš„ã¨ã—ã¦ãŠã‚Šã€æŠ•è³‡åŠ©è¨€ã‚„æŠ•è³‡å‹§èª˜ã‚’ç›®çš„ã¨ã™ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚è¨ˆç®—çµæœã¯å‚è€ƒå€¤ã§ã‚ã‚Šã€å®Ÿéš›ã®æŠ•è³‡æˆæœã‚’ä¿è¨¼ã™ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
            <p>æŠ•è³‡ã«ã¯ãƒªã‚¹ã‚¯ãŒä¼´ã„ã¾ã™ã€‚éå»ã®å®Ÿç¸¾ã¯å°†æ¥ã®æˆæœã‚’ä¿è¨¼ã™ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚æŠ•è³‡åˆ¤æ–­ã¯è‡ªå·±è²¬ä»»ã§è¡Œã£ã¦ãã ã•ã„ã€‚</p>
            <p>æœ¬è¨ˆç®—æ©Ÿã§ä½¿ç”¨ã—ã¦ã„ã‚‹è¨ˆç®—æ–¹æ³•ã‚„å‰ææ¡ä»¶ã¯ã€å®Ÿéš›ã®å¸‚å ´ç’°å¢ƒã‚„å€‹äººã®çŠ¶æ³ã«ã‚ˆã£ã¦ç•°ãªã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚å…·ä½“çš„ãªæŠ•è³‡åˆ¤æ–­ã«ã¤ã„ã¦ã¯ã€å°‚é–€å®¶ã«ç›¸è«‡ã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚</p>
            <p>æœ¬ã‚µã‚¤ãƒˆã®åˆ©ç”¨ã«ã‚ˆã‚Šç”Ÿã˜ãŸã„ã‹ãªã‚‹æå®³ã«ã¤ã„ã¦ã‚‚ã€å½“æ–¹ã¯ä¸€åˆ‡ã®è²¬ä»»ã‚’è² ã„ã¾ã›ã‚“ã€‚</p>
            
            <div class="footer-links">
                <a href="privacy-policy.html">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</a>
                <a href="contact.html">ãŠå•ã„åˆã‚ã›</a>
            </div>
        </div>
    </div>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    
    <script>
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
        let currentStep = 0;
        let chart = null;
        let calculationHistory = [];
        
        // localStorageå¯¾ç­–
        const storage = {
            getItem: function(key) {
                try {
                    return localStorage.getItem(key);
                } catch (e) {
                    console.warn('localStorage is not available');
                    return null;
                }
            },
            setItem: function(key, value) {
                try {
                    localStorage.setItem(key, value);
                } catch (e) {
                    console.warn('localStorage is not available');
                }
            }
        };
        
        // ã‚¹ãƒ†ãƒƒãƒ—ç®¡ç†
        function setStep(step) {
            currentStep = step;
            updateUI();
        }
        
        function nextStep() {
            if (currentStep < 2) {
                currentStep++;
                updateUI();
            } else {
                calculateFIRE();
            }
        }
        
        function prevStep() {
            if (currentStep > 0) {
                currentStep--;
                updateUI();
            }
        }
        
        function updateUI() {
            // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼æ›´æ–°
            const progress = ((currentStep + 1) / 3) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            
            // ã‚¹ãƒ†ãƒƒãƒ—è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆ
            for (let i = 0; i < 3; i++) {
                const stepElement = document.querySelectorAll('.step')[i];
                const formElement = document.getElementById('step' + (i + 1));
                
                if (i === currentStep) {
                    stepElement.classList.add('active');
                    formElement.classList.remove('hidden');
                } else {
                    stepElement.classList.remove('active');
                    formElement.classList.add('hidden');
                }
                
                if (i < currentStep) {
                    stepElement.classList.add('completed');
                } else {
                    stepElement.classList.remove('completed');
                }
            }
            
            // ãƒœã‚¿ãƒ³çŠ¶æ…‹æ›´æ–°
            document.getElementById('prevBtn').disabled = currentStep === 0;
            
            if (currentStep === 2) {
                document.getElementById('nextBtn').textContent = 'FIREå¹´é½¢ã‚’è¨ˆç®—';
                document.getElementById('nextBtn').style.background = 'linear-gradient(135deg, #f093fb, #f5576c)';
            } else {
                document.getElementById('nextBtn').textContent = 'æ¬¡ã¸';
                document.getElementById('nextBtn').style.background = 'linear-gradient(135deg, #667eea, #764ba2)';
            }
        }
        
        // FIREè¨ˆç®—
        function calculateFIRE() {
            // å…¥åŠ›å€¤å–å¾—
            const currentAge = parseInt(document.getElementById('currentAge').value);
            const annualIncome = parseInt(document.getElementById('annualIncome').value);
            const annualExpense = parseInt(document.getElementById('annualExpense').value);
            const currentSavings = parseInt(document.getElementById('currentSavings').value);
            const targetExpense = parseInt(document.getElementById('targetExpense').value);
            const expectedReturn = parseFloat(document.getElementById('expectedReturn').value) / 100;
            const inflationRate = parseFloat(document.getElementById('inflationRate').value) / 100;
            
            // å®Ÿè³ªåˆ©å›ã‚Š
            const realReturn = expectedReturn - inflationRate;
            
            // 4%ãƒ«ãƒ¼ãƒ«ã«åŸºã¥ãå¿…è¦è³‡ç”£é¡
            const requiredAmount = targetExpense * 25;
            
            // å¹´é–“è²¯è“„é¡
            const annualSaving = annualIncome - annualExpense;
            const monthlySaving = annualSaving / 12;
            
            // FIREé”æˆã¾ã§ã®å¹´æ•°ã‚’è¨ˆç®—
            let assets = currentSavings;
            let years = 0;
            const assetHistory = [{year: 0, assets: assets}];
            
            while (assets < requiredAmount && years < 50) {
                years++;
                assets = assets * (1 + realReturn) + annualSaving;
                assetHistory.push({
                    year: years,
                    assets: Math.round(assets),
                    nominalAssets: Math.round(assets * Math.pow(1 + inflationRate, years))
                });
            }
            
            // æˆåŠŸç¢ºç‡è¨ˆç®—ï¼ˆç°¡æ˜“ç‰ˆï¼‰
            const successRate = calculateSuccessRate(currentSavings, annualSaving, realReturn, requiredAmount);
            
            // çµæœè¡¨ç¤º
            const fireAge = currentAge + years;
            const totalSaved = annualSaving * years;
            
            document.getElementById('fireAge').textContent = fireAge;
            document.getElementById('yearsToFire').textContent = years;
            document.getElementById('requiredAmount').textContent = requiredAmount.toLocaleString();
            document.getElementById('monthlySaving').textContent = Math.round(monthlySaving * 10) / 10;
            document.getElementById('successRate').textContent = successRate;
            document.getElementById('totalSaved').textContent = Math.round(totalSaved).toLocaleString();
            
            // ã‚°ãƒ©ãƒ•æç”»
            drawChart(assetHistory, currentAge);
            
            // ã‚·ã‚§ã‚¢ãƒœã‚¿ãƒ³æ›´æ–°
            updateShareButtons(fireAge, requiredAmount);
            
            // å±¥æ­´ä¿å­˜
            saveToHistory({
                date: new Date().toLocaleString(),
                fireAge,
                requiredAmount,
                years,
                currentAge
            });
            
            // çµæœè¡¨ç¤º
            document.getElementById('results').classList.remove('hidden');
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
        }
        
        // æˆåŠŸç¢ºç‡è¨ˆç®—
        function calculateSuccessRate(initialAmount, annualSaving, expectedReturn, targetAmount) {
            const simulations = 100;
            let successes = 0;
            
            for (let i = 0; i < simulations; i++) {
                let assets = initialAmount;
                let years = 0;
                
                while (assets < targetAmount && years < 50) {
                    years++;
                    const randomReturn = expectedReturn + (Math.random() - 0.5) * 0.2;
                    assets = assets * (1 + randomReturn) + annualSaving;
                }
                
                if (years < 50) successes++;
            }
            
            return Math.round((successes / simulations) * 100);
        }
        
        // ã‚°ãƒ©ãƒ•æç”»
        function drawChart(assetHistory, currentAge) {
            const ctx = document.getElementById('assetChart').getContext('2d');
            
            if (chart) {
                chart.destroy();
            }
            
            const labels = assetHistory.map(item => (currentAge + item.year) + 'æ­³');
            const realAssets = assetHistory.map(item => item.assets);
            const nominalAssets = assetHistory.map(item => item.nominalAssets || item.assets);
            
            chart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'å®Ÿè³ªè³‡ç”£ï¼ˆã‚¤ãƒ³ãƒ•ãƒ¬èª¿æ•´å¾Œï¼‰',
                        data: realAssets,
                        borderColor: 'rgb(102, 126, 234)',
                        backgroundColor: 'rgba(102, 126, 234, 0.1)',
                        tension: 0.4,
                        fill: true
                    }, {
                        label: 'åç›®è³‡ç”£',
                        data: nominalAssets,
                        borderColor: 'rgb(236, 72, 153)',
                        backgroundColor: 'rgba(236, 72, 153, 0.1)',
                        tension: 0.4,
                        fill: true,
                        borderDash: [5, 5]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.dataset.label + ': ' + context.parsed.y.toLocaleString() + 'ä¸‡å††';
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return value.toLocaleString() + 'ä¸‡å††';
                                }
                            }
                        }
                    }
                }
            });
        }
        
        // ã‚·ã‚§ã‚¢ãƒœã‚¿ãƒ³æ›´æ–°
        function updateShareButtons(fireAge, requiredAmount) {
            const shareText = `ç§ã®FIREé”æˆäºˆæƒ³å¹´é½¢ã¯${fireAge}æ­³ï¼å¿…è¦è³‡ç”£é¡ã¯${requiredAmount.toLocaleString()}ä¸‡å††ã§ã™ã€‚ã‚ãªãŸã¯ä½•æ­³ã§FIREã§ãã‚‹ï¼Ÿ`;
            const url = 'https://appadaycreator.github.io/fire-calculator';
            
            document.getElementById('shareTwitter').href = 
                `https://twitter.com/intent/tweet?text=${encodeURIComponent(shareText + '\n\n#ç¶™ç¶šã¯åŠ›ãªã‚Š #FIRE #æ—©æœŸãƒªã‚¿ã‚¤ã‚¢ #è³‡ç”£å½¢æˆ')}&url=${encodeURIComponent(url)}`;
            
            document.getElementById('shareFacebook').href = 
                `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}&quote=${encodeURIComponent(shareText)}`;
            
            document.getElementById('shareLine').href = 
                `https://social-plugins.line.me/lineit/share?url=${encodeURIComponent(url)}&text=${encodeURIComponent(shareText)}`;
        }
        
        // å±¥æ­´ä¿å­˜
        function saveToHistory(data) {
            calculationHistory.unshift(data);
            if (calculationHistory.length > 10) {
                calculationHistory = calculationHistory.slice(0, 10);
            }
            storage.setItem('fireHistory', JSON.stringify(calculationHistory));
        }
        
        // åˆæœŸåŒ–
        window.addEventListener('DOMContentLoaded', function() {
            // å±¥æ­´èª­ã¿è¾¼ã¿
            const saved = storage.getItem('fireHistory');
            if (saved) {
                try {
                    calculationHistory = JSON.parse(saved);
                } catch (e) {
                    console.warn('Failed to parse history');
                }
            }
            
            // UIåˆæœŸåŒ–
            updateUI();
        });
    </script>
</body>
</html>